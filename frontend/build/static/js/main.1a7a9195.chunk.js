(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n(68)},35:function(e,t,n){},64:function(e,t){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(27),c=n.n(o),l=(n(35),n(3)),i=n(28),u=n.n(i),s=n(29),m=n.n(s),f=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)([]),i=Object(l.a)(c,2),s=i[0],f=i[1],d=Object(a.useState)(""),p=Object(l.a)(d,2),g=p[0],h=p[1],b=Object(a.useState)(""),v=Object(l.a)(b,2),E=v[0],w=v[1],y=Object(a.useState)("room1"),j=Object(l.a)(y,2),O=(j[0],j[1],Object(a.useRef)()),S=Object(a.useRef)();S.current={display:"none",position:"fixed",left:0,bottom:"72px",zIndex:222};return Object(a.useEffect)(function(){O.current=u()(window.location.host,{transports:["websocket"]}),O.current.on("login",function(e){h(e)}),O.current.on("messages",function(e){window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),f(function(t){return t.concat(e)}),document.querySelector("form").scrollIntoView(!1)}),O.current.on("typing",function(e){w(e),document.querySelector("#typ").style.display="inline",setTimeout(function(){document.querySelector("#typ").style.display="none"},100)})},[]),Object(a.useEffect)(function(){var e=function(){var e=s.length?s[s.length-1].id:null;O.current.emit("getMessages",e)};return O.current.on("connect",e),function(){return O.current.removeListener("connect",e)}},[s]),r.a.createElement("div",null,g?r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=n.trim();if(t){var a=g.trim();g?(O.current.emit("messages",{name:a,message:t}),o(""),document.querySelector("form").scrollIntoView(!1)):alert("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c!")}}},s.map(function(e){var t=e.id,n=e.name,a=e.message,o=e.createdAt;return r.a.createElement("div",{className:"message",key:t},r.a.createElement("div",null,r.a.createElement("span",{className:"username"},n,": "),a,r.a.createElement("span",{className:"timestamp"},m()(o).format("hh:mm"))))}),r.a.createElement("span",{id:"typ",style:S.current},E||"\u041a\u0442\u043e-\u0442\u043e"," \u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442..."),r.a.createElement("input",{className:"input-chat",onKeyDown:function(){return O.current.emit("typing",g)},value:n,placeholder:"\u041d\u0430\u043f\u0435\u0447\u0430\u0442\u0430\u0439\u0442\u0435 \u0438 Enter",onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",{className:"input-name"},r.a.createElement("label",{htmlFor:"name"},"\u0418\u043c\u044f: "),r.a.createElement("p",null,g),r.a.createElement("a",{href:"/logout"},"Logout"))):r.a.createElement("div",{className:"register"},r.a.createElement("h1",null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c!"),r.a.createElement("a",{href:"/login"},"Go to login!"),r.a.createElement("a",{href:"/registration"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f!")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.1a7a9195.chunk.js.map